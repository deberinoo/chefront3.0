<title>Chefront - Update Category</title>

<link rel="stylesheet" href="/public/css/profile.css">

<section>
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-12 col-lg-12 col-xl-12 mx-auto">
                <h2 class="h3 mb-4 page-title">Update Category</h2>
                <div class="my-4">
                    
                    <form action="/admin/save-category/{{categories.name}}?_method=PUT" method="post" enctype="multipart/form-data">
                            <div class="form-group row">
                                <label for="name" class="col-sm-2 col-form-label">Category Name</label>
                                <div class="col-sm-10">
                                    <input type="text" class="form-control text-dark" id="name"
                                        placeholder="+65" name="Name" value={{categories.name}} style="text-transform: capitalize;">
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="description" class="col-sm-2 col-form-label">Description</label>
                                <div class="col-sm-10">
                                    <textarea class="form-control text-dark" id="description" rows="5" maxlength="300"
                                         name="Description" value={{categories.description}}>{{categories.description}}</textarea>
                                    <div id="word-count">
                                        <span id="current">0</span>
                                        <span id="maximum">/ 300</span>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <br>
                            <br>
                            <div class="form-group row">
                                <label for="thumbnail" class="col-sm-2 col-form-label">Thumbnail</label>
                                <div class="col-sm-5">
                                    <input type="file" onchange="readURL(this);" class="form-control" id="thumbnail"
                                    name="Thumbnail" class="file-input" accept="image/png, image/jpg, image/jpeg, image/svg">
                                    <p><i>Only upload images with the following format:</i> .PNG/.JPG/.JPEG/.SVG</p>
                                </div>
                                <div class="col-sm-4 image-preview">
                                    <center>
                                        <p>Image Preview:</p>
                                        <img id="blah" src="/{{categories.thumbnail}}" alt=" " class="inside-preview" 
                                        onerror="this.src=`/public/img/placeholderpng`;"/>
                                    </center>
                                </div>
                            </div>
                        <button type="submit" class="btn btn-danger btn-block col-sm-10 rounded-pill shadow-sm" style="margin-left: 125px;">Update</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    $('textarea').keyup(function () {

        var characterCount = $(this).val().length,
            current = $('#current'),
            maximum = $('#maximum'),
            wordCount = $('#word-count');

        current.text(characterCount);
    });

     function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                    $('#blah')
                        .attr('src', e.target.result);
                };

                reader.readAsDataURL(input.files[0]);
            }
        }

    function image_profile_preview(event) {
		document.getElementById("blah").src = event.target.result;
	}

    document.getElementById("Name").addEventListener("keypress", function(e) {
    if(this.selectionStart == 0) {
      // uppercase first letter
      forceKeyPressUppercase(e);
    } else {
      // lowercase other letters
      forceKeyPressLowercase(e);
    }
    }, false);

</script>